<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go Go Go!!</title>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Poppins');

        body {
            margin:0;
            height: 100%;
            width:100%;
            overflow: hidden;
            position: relative;
        }
        #score-board {
            margin-left: 1%;
            margin-top: 1%;
            position: absolute;
            box-shadow: 0 0 40px 40px #0000005d;
            background-color: rgb(33, 33, 33);
            color: aliceblue;
            padding: 1rem;
            border-radius: 0.25rem;
            font-family: 'Poppins',sans-serif;
        }
    </style>
</head>
<body>
    <div id="score-board">00</div>
    <canvas id="canvas"></canvas>
    <script>
        class Ball {
            Ball(x,y,radius) {
                this.x = x;
                this.y = y;
                this.radius = radius;
            }
        }
        const canvas = document.querySelector('#canvas');
        const ctx = canvas.getContext("2d");
        canvas.height = window.innerHeight;
        canvas.width = window.innerWidth;
        const FPS = 30;
        const colors = [];
        const bgColor = '#00ff00';
        let score = 0;

        ctx.fillStyle = bgColor;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        let radius = 45;
        let ballCoordinates = [ radius + 100, radius + 100];
        let xVelocity = 100 / FPS;
        let yVelocity = 100 / FPS;
        let gainCoordinates = [Math.floor(Math.random()*(window.innerWidth-radius*2)+(0.05*window.innerWidth)), Math.floor(Math.random()*(window.innerHeight-radius*2)+(0.05*window.innerHeight))];
        
        function eventLoop(event) {
            switch(event.key) {
                case "s":
                    if(ballCoordinates[1] >= canvas.height-radius) {
                        return;
                    }
                    console.log(`x:${ballCoordinates[0]-gainCoordinates[0]} and y:${ballCoordinates[1]-gainCoordinates[1]} to go`);
                    ballCoordinates[1] += yVelocity;
                    break;
                case "d":
                    if(ballCoordinates[0] >= canvas.width-radius) {
                        return;
                    }
                    console.log(`x:${ballCoordinates[0]-gainCoordinates[0]} and y:${ballCoordinates[1]-gainCoordinates[1]} to go`);

                    ballCoordinates[0] += xVelocity;
                    break;
                case "a":
                    if(ballCoordinates[0] <= 0+radius) {
                        return;
                    }
                    console.log(`x:${ballCoordinates[0]-gainCoordinates[0]} and y:${ballCoordinates[1]-gainCoordinates[1]} to go`);

                    ballCoordinates[0] -= xVelocity;
                    break
                case "w":
                    if(ballCoordinates[1] <= 0+radius) {
                        return;
                    }
                    console.log(`x:${ballCoordinates[0]-gainCoordinates[0]} and y:${ballCoordinates[1]-gainCoordinates[1]} to go`);

                    ballCoordinates[1] -= yVelocity;
                    break
            }

        }
        

        function theyCollided(ballCoordinates,gainCoordinates) {
            if(gainCoordinates[0]+radius > ballCoordinates[0] && gainCoordinates[0]<=ballCoordinates[0]) {
                if(gainCoordinates[1]+radius > ballCoordinates[1] && gainCoordinates[1]<=ballCoordinates[1]) {
                    return true;
                }
            }
            return false;
        }

        function loop() {
            ctx.fillStyle = bgColor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        
            
            ctx.beginPath();
            ctx.arc(ballCoordinates[0], ballCoordinates[1], radius, 0, Math.PI*2, true);
            ctx.fillStyle = "black";
            ctx.stroke();
            if(theyCollided(ballCoordinates,gainCoordinates)) {
                score++;
                document.querySelector('#score-board').textContent = (score>10)?score:`0${score}`;
                gainCoordinates = [Math.floor(Math.random()*(window.innerWidth-radius*2)+(0.05*window.innerWidth)), Math.floor(Math.random()*(window.innerHeight-radius*2)+(0.05*window.innerHeight))];
                return;

            }

            ctx.beginPath();
            ctx.arc(gainCoordinates[0],gainCoordinates[1],5,0,Math.PI*2,true);
            ctx.fillStyle = 'yellow';
            ctx.fill();
            ctx.stroke();
        }

        window.addEventListener("keypress",eventLoop);
        setInterval(loop,1000 / FPS);
    </script>
</body>
</html>